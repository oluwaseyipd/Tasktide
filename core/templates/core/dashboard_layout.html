{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link href="{% static 'css/main.css' %}" rel="stylesheet" />
    <title>{% block title %}TaskTide - Dashboard{% endblock %}</title>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              claude: {
                50: "#f0f4ff",
                100: "#e0e9ff",
                200: "#c7d8ff",
                300: "#a4bdff",
                400: "#8098ff",
                500: "#6366f1",
                600: "#4f46e5",
                700: "#4338ca",
                800: "#3730a3",
                900: "#312e81",
              },
            },
          },
        },
      };
    </script>
    <style>
      .fade-in {
        animation: fadeIn 0.5s ease-in;
      }
      .slide-up {
        animation: slideUp 0.3s ease-out;
      }
      .scale-in {
        animation: scaleIn 0.2s ease-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes slideUp {
        from {
          transform: translateY(20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      @keyframes scaleIn {
        from {
          transform: scale(0.95);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      .loader {
        border: 3px solid #f3f4f6;
        border-top: 3px solid #6366f1;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .task-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      }

      .btn-primary {
        background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
        transition: all 0.3s ease;
      }

      .btn-primary:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
      }

      /* Fixed layout styles */
      .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 280px;
        height: 100vh;
        overflow-y: auto;
        z-index: 30;
      }

      .main-content {
        margin-left: 280px;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      .header {
        position: sticky;
        top: 0;
        height: 64px;
        z-index: 20;
      }

      .content-area {
        flex: 1;
        overflow-y: auto;
        padding: 24px;
      }

      .footer {
        position: sticky;
        bottom: 0;
        z-index: 20;
      }

      /* Mobile responsive */
      @media (max-width: 768px) {
        .sidebar {
          transform: translateX(-100%);
          transition: transform 0.3s ease;
        }
        
        .sidebar.open {
          transform: translateX(0);
        }
        
        .main-content {
          margin-left: 0;
        }
      }

      /* Create task button styling */
      .create-task-btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        background: linear-gradient(135deg, #ea580c 0%, #dc2626 100%);
        color: white;
        border-radius: 8px;
        font-weight: 500;
        font-size: 14px;
        transition: all 0.3s ease;
        text-decoration: none;
        width: auto;
        justify-content: flex-start;
      }

      .create-task-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(234, 88, 12, 0.3);
        background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
      }

      .create-task-btn .icon {
        width: 16px;
        height: 16px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 10px;
      }
    </style>
  </head>
  <body class="bg-gray-50">
    {% if messages %}
    <div class="fixed top-4 right-4 z-50 space-y-2">
      {% for message in messages %}
      <div class="bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded">
        {{ message }}
      </div>
      {% endfor %}
    </div>
    {% endif %}

    <!-- Sidebar -->
    <aside class="sidebar bg-white shadow-lg border-r border-gray-200">
      <div class="flex flex-col h-full">
        <!-- Logo/Brand -->
        <div class="p-6 border-b border-gray-200">
          <h2 class="font-bold text-2xl text-gray-800">TaskTide</h2>
        </div>

        <!-- Create Task Button -->
        <div class="p-4 border-b border-gray-100">
          <a href="{% url 'create_tasks' %}" class="create-task-btn">
            <span class="icon">
              <i class="fas fa-plus"></i>
            </span>
            <span>Create Task</span>
          </a>
        </div>

        <!-- Navigation -->
        <nav class="flex-1 p-4 space-y-2">
          <a
            href="{% url 'overview' %}"
            class="sidebar-item flex items-center space-x-3 p-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors active"
          >
            <i class="fas fa-tachometer-alt w-5 h-5"></i>
            <span class="font-medium">Overview</span>
          </a>
          
          <a
            href="{% url 'all_tasks' %}"
            class="sidebar-item flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors"
          >
            <i class="fas fa-tasks w-5 h-5"></i>
            <span class="font-medium">All Tasks</span>
          </a>

          <a
            href="{% url 'completed_tasks' %}"
            class="sidebar-item flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors"
          >
            <i class="fas fa-check-circle w-5 h-5"></i>
            <span class="font-medium">Completed</span>
          </a>

          <a
            href="{% url 'incomplete_tasks' %}"
            class="sidebar-item flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors"
          >
            <i class="fas fa-times-circle w-5 h-5"></i>
            <span class="font-medium">Incomplete</span>
          </a>

          <div class="border-t border-gray-200 my-4"></div>

          <a
            href="{% url 'profile' %}"
            class="sidebar-item flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors"
          >
            <i class="fas fa-user w-5 h-5"></i>
            <span class="font-medium">Profile</span>
          </a>

          <a
            href="{% url 'settings' %}"
            class="sidebar-item flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors"
          >
            <i class="fas fa-cog w-5 h-5"></i>
            <span class="font-medium">Settings</span>
          </a>
        </nav>

        <!-- Logout Button -->
        <div class="p-4 border-t border-gray-200">
          <form 
          action="{% url 'logout' %}" 
          method="POST"             
          class="w-full flex cursor-pointer items-center space-x-3 p-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors"
>
            {% csrf_token %}
          <i class="fas fa-sign-out-alt w-5 h-5"></i>
          <button type="submit">Logout</button>
          </form>
<!-- 
          <a
            href="{% url 'logout' %}"
          >
            <i class="fas fa-sign-out-alt w-5 h-5"></i>
            <span class="font-medium">Logout</span>
          </a> -->
        </div>
      </div>
    </aside>

    <!-- Main Content Area -->
    <div class="main-content">
      <!-- Header -->
      <header class="header bg-white shadow-sm border-b border-gray-200 px-6 flex justify-between items-center">
        <!-- Mobile menu button -->
        <button 
          class="md:hidden p-2 rounded-lg hover:bg-gray-100"
          onclick="toggleSidebar()"
        >
          <i class="fas fa-bars"></i>
        </button>
        
        <!-- Header content -->
        <div class="flex items-center space-x-4 ml-auto">
          <a href="{% url 'profile' %}" class="w-10 h-10 rounded-full border-2 border-blue-300 overflow-hidden hover:border-blue-400 transition-colors">
            <img src="{{ user.profile.profile_image.url }}" alt="Profile" class="w-full h-full object-cover">
          </a>
        </div>
      </header>

      <!-- Content Area -->
      <main class="content-area">
        {% block content %}

        {% endblock %}
      </main>

      <!-- Footer -->
      <footer class="footer bg-white border-t border-gray-200 px-6 py-4">
        <div class="text-sm text-center text-gray-600">
          Â© 2025 TaskTide. All rights reserved.
        </div>
      </footer>
    </div>

    <!-- JavaScript for mobile menu -->
    <script>
      function toggleSidebar() {
        const sidebar = document.querySelector('.sidebar');
        sidebar.classList.toggle('open');
      }

      function logout() {
        // Add logout functionality here
        console.log('Logout clicked');
      }

      function showPage(page) {
        // Add page navigation functionality here
        console.log('Navigate to:', page);
      }
    </script>
    
    <script src="{% static 'js/main.js' %}"></script>
  </body>
</html>